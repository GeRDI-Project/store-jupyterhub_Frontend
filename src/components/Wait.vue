<template>
  <div>
    <svg alt="Wait Animation" class="center wait-logo"
         xmlns:dc="http://purl.org/dc/elements/1.1/"
         xmlns:cc="http://creativecommons.org/ns#"
         xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns="http://www.w3.org/2000/svg"
         xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
         xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
         version="1.1"
         id="Ebene_1"
         x="0px"
         y="0px"
         viewBox="0 0 336.3495 237.73516"
         xml:space="preserve"
         sodipodi:docname="Download (1).svg"
         width="336.34949"
         height="237.73515"
         inkscape:version="0.91 r13725"><metadata
           id="metadata55"><rdf:RDF><cc:Work
               rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
                 rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
           id="defs53" /><sodipodi:namedview
           pagecolor="#ffffff"
           bordercolor="#666666"
           borderopacity="1"
           objecttolerance="10"
           gridtolerance="10"
           guidetolerance="10"
           inkscape:pageopacity="0"
           inkscape:pageshadow="2"
           inkscape:window-width="2560"
           inkscape:window-height="1413"
           id="namedview51"
           showgrid="false"
           fit-margin-top="10"
           fit-margin-left="10"
           fit-margin-right="10"
           fit-margin-bottom="10"
           inkscape:zoom="1.18"
           inkscape:cx="-95.475854"
           inkscape:cy="-179.27167"
           inkscape:window-x="1920"
           inkscape:window-y="0"
           inkscape:window-maximized="1"
           inkscape:current-layer="g38"
           showguides="true"
           inkscape:guide-bbox="true"><sodipodi:guide
             position="327.24069,-5.1818423"
             orientation="1,0"
             id="guide3405" /><sodipodi:guide
             position="54.359324,7.530022"
             orientation="0,1"
             id="guide3407" /></sodipodi:namedview><g
           id="g4600"
           transform="translate(-145.10339,-157.23725)"><g
             id="g24"
             transform="translate(-400.79661,-5.8940677)"><line
               id="line4"
               y2="228"
               x2="698.59998"
               y1="173.7"
               x1="696.70001"
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><line
               id="line6"
               y2="228"
               x2="566.29999"
               y1="173.7"
               x1="696.70001"
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><line
               id="line8"
               y2="188.60001"
               x2="770.59998"
               y1="242.3"
               x1="861.79999"
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><polyline
               id="polyline10"
               points="695.2,390.3 623.7,316.2 710.4,316.2  "
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><line
               id="line12"
               y2="316.20001"
               x2="625.09998"
               y1="291.10001"
               x1="559"
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><polygon
               id="polygon14"
               points="626,221.8 625.4,315.8 656.6,267.3 698.6,228 755.1,264.3 788.9,341.5 861.8,309.9 861.8,242.3 815.3,248.2 770.6,188.6 696.7,173.7 625.1,221.4 566.3,228 559,291.1 "
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><polyline
               id="polyline16"
               points="755.1,264.3 815.3,248.2 788.9,341.5 696.7,390.3 710.4,316.2 656.1,268.5 755.1,264.3  "
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><line
               id="line18"
               y2="248.2"
               x2="815.29999"
               y1="309.89999"
               x1="861.79999"
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><polyline
               id="polyline20"
               points="656.1,268.5 625.1,221.4 698.6,228 770.6,188.6  "
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /><polyline
               id="polyline22"
               points="788.9,341.5 710.4,316.2 755.1,264.3  "
               class="st0"
               style="fill:none;stroke:#063f63;stroke-width:1.1214;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10" /></g><g
             id="g38"
             transform="translate(-400.79661,-5.8940677)"><circle
               id="circle26"
               cy="227.6"
               cx="566.7"
               class="st1"
               r="10.4"
               style="fill:#063f63" /><circle
               id="circle28"
               cy="242.3"
               cx="861.79999"
               class="st1"
               r="10.4"
               style="fill:#063f63" /><circle
               id="circle30"
               r="20.4"
               cy="227.89999"
               cx="698.59998"
               class="st1"
               style="fill:#063f63" /><circle
               id="circle32"
               r="9"
               cy="189"
               cx="771"
               class="st1"
               style="fill:#063f63" /><circle
               id="circle34"
               r="9"
               cy="222"
               cx="626"
               class="st1"
               style="fill:#063f63" /><circle
               id="circle36"
               r="22"
               cy="343"
               cx="789"
               class="st1"
               style="fill:#063f63" /></g></g>
             </svg>
    <div class="text-center">
      We are setting up your Jupyter Notebook instance. This may take a minute or two. You will automatically be forwarded.
    </div>
  </div>
</template>

<script>
import anime from 'animejs'

export default {
  name: 'Wait',
  mounted() {
    this.load()
  },
  methods: {
    load() {
      let resizeFactor = 1.5
      let durInMillis = 1500
      let elems = Array.prototype.slice.call(document.getElementsByClassName('st1'))
      elems.sort(function(a,b) {
        return a.cx.baseVal.value - b.cx.baseVal.value
      })
      let min = elems[0].cx.baseVal.value
      let max = elems[elems.length - 1].cx.baseVal.value
      let diff = max - min
      let numCircles = elems.length
      let animes = []
      elems.forEach(function(elem) {
        let startTime = (durInMillis/2)-((elem.cx.baseVal.value - min)/diff)*(durInMillis/2)
        console.log(startTime)
        let animation = anime({
          targets: elem,
          r: [elem.r.baseVal.value, elem.r.baseVal.value * resizeFactor],
          autoplay: false,
          duration: durInMillis,
          delay: durInMillis / 4,
          direction: 'alternate',
          loop: true,
          easing: 'easeInOutCubic'
        })
        animes.push(animation)
        animation.seek(startTime)
        //animation.play()
      })
      anime({
        targets: document.getElementsByClassName('st1'),
        r: function (e) {
          return [0, e.r.baseVal.value]
        },
        duration: 1000,
        delay: 700,
        loop: false,
        easing: 'easeInOutCubic'
      })
      let lines = document.getElementsByClassName('st0')
      anime({
        targets: lines,
        duration: 1500,
        strokeDashoffset: [anime.setDashoffset, 0],
        easing: 'easeInOutCubic',
        delay: 500,
        complete: function(a) {
          animes.forEach(function(e) {
            e.play()
          })
        }
      })
    }
  }
}
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style scoped>
.center {
  margin: auto;
  width: 100%;
  margin-top: 3rem;
  margin-bottom: 3rem;
}
</style>
